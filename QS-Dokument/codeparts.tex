\section{Quellcodeauszug}

\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{string-color}{rgb}{0.901, 0.290, 0.098}

\lstset
{
    language=Python,
    basicstyle=\footnotesize,
    otherkeywords={self},             % Add keywords here
    keywordstyle=\color{deepblue},
    commentstyle=\color{string-color},
    emph={MyClass,__init__},          % Custom highlighting
    emphstyle=\color{deepred},    % Custom highlighting style
    stringstyle=\color{deepgreen},
    numbers=left,
    stepnumber=1,
    tabsize=2,
    breaklines=true,
}

Das von uns verwendete Webframework erlaubt die funktionale und objektorientierte Programmierung. Wir haben uns für die funktionale Programmierung
entschieden, weswegen wir drei Module (anstatt drei Klassen) angehängt haben, die repräsentativ für die meisten
anderen Module des Projekts stehen.

\subsection{Das Modul Api.py}
%Description
Das Modul Api.py enthält Funktionen, die sich um die Anfragen an die REST API kümmern.
Da das Webinterface seine Anfragen direkt an die REST API sendet, ist diese Modul ein essentieller
Bestandteil des Backends.

Da das Modul sehr groß ist, wurde hier nur ein kleiner Ausschnitt angehängt.
Die vollständige Fassung ist im Repository zu finden\footnote{\url{https://github.com/bp-flugsimulator/server/blob/master/frontend/api.py}}.
\lstinputlisting[language=Python, lastline=308]{api.py}

\subsection{Das Modul Consumers.py}
Da sowohl für die Kommunikation zwischen Clients und Master als auch zwischen Browser und
Master \textit{websockets}\footnote{\url{https://tools.ietf.org/html/rfc6455}} verwendet werden,
ist die Behandlung von eingehenden Websocketrequests ein zentraler Bestandteil. Dies ist die
Aufgabe des Moduls "`consumer.py"', welches als erste Instanz Nachrichten an den Master annimmt und
weiter verteilt.
Da das Modul sehr groß ist, wurde hier nur ein kleiner Ausschnitt angehängt.
Die vollständige Fassung ist im Repository zu finden\footnote{\url{https://github.com/bp-flugsimulator/server/blob/master/frontend/consumers.py}}.

\lstinputlisting[language=Python, lastline=336]{consumers.py}

\subsection{Das Modul Controller.py}
Die Steuerung der angeschlossenen Clients ist einer der Hauptaufgaben des
Master. Dies besteht vorallem daraus Datenbankeinträge zu modifizieren und
basierend darauf Nachrichten über die Websockets zu verschicken. Um weiteren
Komponenten der Mastersoftware, die Arbeit mit den Clients zu erleichtern,
wurden die möglichen Aktionen im "`controller.py"'-Modul implementiert. Dies
entspricht dem Model-View-Controller Konzept.

Da das Modul sehr groß ist, wurde hier nur ein kleiner Ausschnitt angehängt.
Die vollständige Fassung ist im Repository zu finden\footnote{\url{https://github.com/bp-flugsimulator/server/blob/master/frontend/controller.py}}.

\lstinputlisting[language=Python,lastline=232]{controller.py}
